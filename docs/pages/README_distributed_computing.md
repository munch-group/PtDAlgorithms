# Distributed Computing Documentation

This directory contains comprehensive documentation for distributed computing with PtDAlgorithms.

## New Documentation Pages

### 1. Distributed Computing Basics
**File:** `distributed_computing_basics.ipynb`

Introduction to distributed computing with PtDAlgorithms:
- One-line initialization overview
- DistributedConfig object reference
- Simple distributed computation example
- Parallel PDF evaluation
- Best practices
- Performance benchmarking

**Key takeaway:** Replace 200+ lines of SLURM boilerplate with:
```python
dist_info = initialize_distributed()
```

### 2. Distributed SVGD Inference
**File:** `distributed_svgd_inference.ipynb`

Bayesian inference with Stein Variational Gradient Descent:
- Building parameterized coalescent models
- Distributing SVGD particles across devices
- Running inference at scale
- Posterior analysis and visualization
- Convergence monitoring
- Posterior predictive distributions

**Features:**
- Complete SVGD workflow
- Synthetic data generation
- Visualization examples
- Performance analysis
- Custom model adaptation

### 3. SLURM Cluster Setup
**File:** `slurm_cluster_setup.ipynb`

Configuration and resource management:
- YAML-based cluster configuration
- Predefined profiles (debug, small, medium, large, production)
- Custom configuration creation
- SLURM script generation
- Job monitoring commands
- Resource estimation
- Troubleshooting guide

**Profiles available:**
- **debug**: 1 node, 4 CPUs (quick testing)
- **small**: 2 nodes, 16 devices (development)
- **medium**: 4 nodes, 64 devices (standard jobs)
- **large**: 8 nodes, 128 devices (large-scale)
- **production**: 8 nodes, 256 devices (maximum scale)

## Integration with Documentation Site

These notebooks are integrated into the main documentation via `_quarto.yml`:

```yaml
- section: "Distributed Computing"
  contents:
    - pages/distributed_computing_basics.ipynb
    - pages/distributed_svgd_inference.ipynb
    - pages/slurm_cluster_setup.ipynb
```

## Building the Documentation

To build the documentation with these new pages:

```bash
cd docs
quarto render
```

Or preview while editing:

```bash
cd docs
quarto preview
```

## Key Features Documented

### One-Line Initialization
```python
from ptdalgorithms import initialize_distributed
dist_info = initialize_distributed()
```

### Configuration Management
```python
from ptdalgorithms.cluster_configs import get_default_config
config = get_default_config("medium")
```

### Script Generation
```bash
# Generate and submit in one command
sbatch <(python generate_slurm_script.py --profile medium --script my_script.py)
```

### SVGD Inference
```python
from ptdalgorithms import SVGD
svgd = SVGD(model, observed_data, n_particles=100)
results = svgd.fit()
```

## Related Files

### Example Scripts
- `examples/distributed_inference_simple.py` - Basic distributed computation
- `examples/simple_multinode_example.py` - Multi-node SVGD example
- `examples/generate_slurm_script.py` - Script generator tool

### Configuration Examples
- `examples/slurm_configs/debug.yaml`
- `examples/slurm_configs/small_cluster.yaml`
- `examples/slurm_configs/medium_cluster.yaml`
- `examples/slurm_configs/production.yaml`
- `examples/slurm_configs/gpu_cluster.yaml`

### Guides
- `examples/DISTRIBUTED_COMPUTING_GUIDE.md` - Complete guide
- `examples/SLURM_MULTINODE_GUIDE.md` - Advanced SLURM topics

## API Documentation

The distributed computing API is also documented in the API reference:

- **Distributed Initialization**: `initialize_distributed()`, `DistributedConfig`, etc.
- **Cluster Configuration**: `ClusterConfig`, `load_config()`, `get_default_config()`, etc.
- **Phase-Type Computations**: `compute_pmf_ffi()`, `compute_moments_ffi()`, etc.
- **Inference**: `SVGD` class

## Quick Links

- **Main Documentation**: See `docs/` directory
- **API Reference**: Generated by quartodoc
- **Example Scripts**: See `examples/` directory
- **Configuration Files**: See `examples/slurm_configs/`

## Maintenance

When updating distributed computing features:

1. Update relevant notebook(s) in `docs/pages/`
2. Update API reference in `docs/_quarto.yml` if needed
3. Update example scripts in `examples/`
4. Rebuild documentation: `cd docs && quarto render`
5. Test examples to ensure they still work

## Questions or Issues?

- Check the notebooks for detailed examples
- See `DISTRIBUTED_COMPUTING_GUIDE.md` for troubleshooting
- Review API reference for function signatures
- Open an issue on GitHub
